<ng-container *ngIf="vm() as m">
  <div *ngIf="m.loading">Loading…</div>
  <div *ngIf="m.error">Error: {{m.error}}</div>

  <ng-container *ngIf="m.period">
    <h4>Period Attribution</h4>
    <p><strong>Total:</strong> {{ m.period['totalAttribution'] | percent:'1.2-2' }}</p>
    <table>
      <thead>
      <tr><th>Segment</th><th>Allocation</th><th>Selection</th><th>Interaction</th><th>Total</th></tr>
      </thead>
      <tbody>
      <tr *ngFor="let r of m.period.periodAttribution">
        <td>{{ r.segment }}</td>
        <td>{{ r.allocation | number:'1.4-4' }}</td>
        <td>{{ r.selection  | number:'1.4-4' }}</td>
        <td>{{ r.interaction| number:'1.4-4' }}</td>
        <td>{{ r.total      | number:'1.4-4' }}</td>
      </tr>
      </tbody>
    </table>
  </ng-container>

  <ng-container *ngIf="m.daily">
    <h4 style="margin-top:1rem">Daily Attribution</h4>
    <ul>
      <li *ngFor="let d of m.daily.dailyAttribution">
        {{ d.asOfDate }} — {{ d.segment }} — total {{ d.total | number:'1.4-4' }}
        (alloc {{ d.allocation | number:'1.4-4' }}, sel {{ d.selection | number:'1.4-4' }}, int {{ d.interaction | number:'1.4-4' }})
      </li>
    </ul>
  </ng-container>
</ng-container>
