<ng-container *ngIf="vm() as m">
  <div *ngIf="m.error" style="color:#ff8a80; font-weight:600; margin-bottom:8px;">Error: {{m.error}}</div>

  <ng-container *ngIf="m.period as p">
    <h4>Period Attribution</h4>
    <p><strong>Total:</strong> {{ p['totalAttribution'] | percent:'1.2-2' }}</p>

    <table class="data-table">
      <thead>
        <tr>
          <th>Segment</th>
          <th class="num">Allocation</th>
          <th class="num">Selection</th>
          <th class="num">Interaction</th>
          <th class="num">Total</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let r of p.periodAttribution">
          <td>{{ r.segment }}</td>
          <td class="num">{{ r.allocation | number:'1.4-4' }}</td>
          <td class="num">{{ r.selection  | number:'1.4-4' }}</td>
          <td class="num">{{ r.interaction| number:'1.4-4' }}</td>
          <td class="num">{{ r.total      | number:'1.4-4' }}</td>
        </tr>
      </tbody>
    </table>
  </ng-container>

  <ng-container *ngIf="m.daily as d">
    <h4 style="margin-top:1rem">Daily Attribution</h4>
    <table class="data-table">
      <thead>
        <tr>
          <th>Date</th>
          <th>Segment</th>
          <th class="num">Allocation</th>
          <th class="num">Selection</th>
          <th class="num">Interaction</th>
          <th class="num">Total</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let r of d.dailyAttribution">
          <td>{{ r.asOfDate }}</td>
          <td>{{ r.segment }}</td>
          <td class="num">{{ r.allocation | number:'1.4-4' }}</td>
          <td class="num">{{ r.selection  | number:'1.4-4' }}</td>
          <td class="num">{{ r.interaction| number:'1.4-4' }}</td>
          <td class="num">{{ r.total      | number:'1.4-4' }}</td>
        </tr>
      </tbody>
    </table>
  </ng-container>
</ng-container>
